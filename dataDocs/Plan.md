# План автоматизации тестирования

## Перечень автоматизируемых сценариев

Валидные данные для тестирования:
Номер карты - цифры, длина 16 символов;
Дата действия карты → год - двухзначное число, две последние цифры года; месяц - двухзначное число номера месяца; дата не должна быть раньше текущего месяца и года, карта должна быть активной по дате.
Имя владельца карты - имя и фамилия на латинице, максимальная длина по ТЗ не задана.
CVC код - цифры, длина 3 символа

По файлу data.json предоставлены номера карт, принимаемые и отклоняемые сервисом.
Карта, одобренная сервисом - 4444 4444 4444 4441.
Карта, отклоняемая сервисом - 4444 4444 4444 4442.

Для остальных данных планирую использовать LоcalDate для года и месяца и Faker для имени и CVC.
Невалидные данные будут также генерироваться через LоcalDate и Faker.

### Позитивные тест кейсы

- Покупка тура с валидными данными по карте, транзакция одобрена
Открыть страницу http://localhost:8080/ 
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Месяц" валидные данные 
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные 
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, получен ответ об успешной транзакции, появилось всплывающее сообщение с текстом: "Операция одобрена Банком", в БД появилась отметка об успешной транзакции.
---
- Покупка тура с валидными данными по карте, транзакция отклонена
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4442"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, получен ответ об отклоненной транзакции, появилось всплывающее сообщение с текстом: "Ошибка! Банк отказал в проведении операции", в БД появилась отметка об отклоненной транзакции.
---
- Покупка тура с валидными данными в кредит, транзакция одобрена
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить в кредит"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, получен ответ об успешной транзакции, появилось всплывающее сообщение с текстом: "Операция одобрена Банком", в БД появилась отметка об успешной транзакции.
---
- Покупка тура с валидными данными в кредит, транзакция отклонена
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить в кредит"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4442"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, получен ответ об отклоненной транзакции, появилось всплывающее сообщение с текстом: "Ошибка! Банк отказал в проведении операции", в БД появилась отметка об отклоненной транзакции.
---

### Негативные тест кейсы

- Покупка тура с невалидными данными по карте, номер карты
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" невалидное значение
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "Номер карты указан неверно", в БД не появилось записи об транзакции.
---
- Покупка тура с невалидными данными по карте, месяц
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Месяц" невалидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "месяц указан неверно", в БД не появилось записи об транзакции.
---
- Покупка тура с невалидными данными по карте, год
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" невалидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "год указан неверно", в БД не появилось записи об транзакции.
---
- Покупка тура с невалидными данными по карте, владелец
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" невалидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "имя владельца указано неверно", в БД не появилось записи об транзакции.
---
- Покупка тура с невалидными данными по карте, CVC
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" невалидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "CVC код указан неверно", в БД не появилось записи об транзакции.
---
- Покупка тура с невалидными данными по карте, не заполнен номер карты
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "Номер карты не заполнен", в БД не появилось записи об транзакции.
---
- Покупка тура с невалидными данными по карте, не заполнен месяц
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "месяц не заполнен", в БД не появилось записи об транзакции.
---
- Покупка тура с невалидными данными по карте, не заполнен год
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Владелец" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "год не заполнен", в БД не появилось записи об транзакции.
---
- Покупка тура с невалидными данными по карте, не указан владелец
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "CVC/CVV" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "имя владельца не заполнено", в БД не появилось записи об транзакции.
---
- Покупка тура с невалидными данными по карте, не указан CVC
Открыть страницу http://localhost:8080/
Нажать на кнопку "Купить"
Ввести в поле "Номер карты" значение - "4444 4444 4444 4441"
Ввести в поле "Месяц" валидные данные
Ввести в поле "Год" валидные данные
Ввести в поле "Владелец" валидные данные
Нажать на кнопку "Продолжить"

ОР: Данные отправлены на сервер, появилось всплывающее сообщение с текстом: "CVC код не указан", в БД не появилось записи об транзакции.
---
Все негативные сценарии прогнать с такой же логикой, но для покупки в кредит. (второй шаг во всех кейсах заменить с "Нажать на кнопку "Купить"" на "Нажать на кнопку "Купить в кредит"")

## Перечень используемых инструментов с обоснованием выбора
- GitHub для хранения кода в удобном для команды формате, с возможностью код ревью и совместной работы. (Удобно отслеживать изменения в проекте, заводить баг репорты)
- Язык программирования Java 8 (объектная ориентация позволяет удобно проектировать классы для тестирования, большое количество библиотек, плагинов и фреймворков, много информации в интернете)
- Среда разработки IntelliJ IDEA (есть бесплатная версия, интеграция с GIT, возможность использовать разные сборки maven, greadle)
- Сборка на гредл (удобство подключения селениума и CI).
- Junit 5 (удобство в подключении и широкий спектр возможностей для тестирования)
- Селениум для автоматизации действий на странице. (встроенный webdriver, поддерживает несколько браузеров)
- CI Allure, чтобы следить за прогоном тестов, изучать статистику по итогам. (простота в настройке, в то же время отчеты достаточно информативны)
- Docker для развертывания контейнеров с БД и имитацией банковского сервиса. (поддерживает много ОС для развертывания контейнеров, простая установка)
- Facker для генерации валидных и невалидных данных для тест-кейсов. (Удобная библиотека для генерации данных)
- LоcalDate библиотека для получения даты, поможет генерировать валидные и невалидные данные для полей месяц и год. (Другой библиотеки для получения текущей даты я пока не знаю)

## Перечень и описание возможных рисков при автоматизации
- Изменение структуры формы, расположение кнопок и полей, участвующих в тест-кейсах.
- Изменение атрибутов и тегов у элементов страницы. 
- Сложности с записью данных в БД, чтением данных из БД.

## Интервальная оценка с учётом рисков в часах
40 часов. 

## План сдачи работ: когда будут готовы автотесты, результаты их прогона
- Как поднять SUT, связать с БД и банковским сервисом — уже готово, потрачено примерно 5 часов.
- Автотесты будут готовы к 27.04.23, с учетом занятости по 3 часа в день. 
- Результаты их прогона будут готовы к 04.05.23, с учетом занятости по 3 часа в день.